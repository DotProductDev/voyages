{% extends "help/helpbase.html" %}
{% load i18n %}
{% load highlight %}

{% block csslist %}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/help/help-glossary.css" />
{% endblock %}

{% block title %}{% trans 'Glossary' %}{% endblock %}

{% block main-content %}
<div>
{% if results %}
	<h3>Results</h3>
	{% for i in results %}
        {% if i.object.term %}
	        <p>
		        {% highlight i.object.term with query  %}
	        </p>
	        {% highlight i.object.description with query %}
            <br />
        {% endif %}
	{% empty %}
	<p>
	    No results found.
	</p>
	{% endfor %}
{% endif %}
</div>

<div class="glossary-letters-and-search">

<table border="0" cellspacing="0" cellpadding="0" class="glossary-letters-and-search">
    <tr>
        <td class="glossary-letters-and-search">
        <table><tr>
        {% for i in letters %}
        <td class="glossary-selector-letter">
            <div class="glossary-selector-letter"><a class="glossary-selector-letter" href="#glossary-letter-{{ i|slice:":1" }}">{{ i }}</a></div>
        </td>
        {% endfor %}
        </tr></table>
    </td>
    <td>
        <table border="0" cellspacing="0" cellpadding="0" style="margin-left: auto; margin-right: 10px;">
            <tr>
                <td><form action="/help/page_glossary" method="post" enctype="multipart/form-data">{% csrf_token %}
                        {{ form.as_p }}
                    </td>
                <td><input style="glossary-search-box" type="submit" value="Search"/>
                </td>
                </form>
            </tr>
        </table>
    </td>
    </tr>
</table>
</div>

<div class="glossary-terms" id="form:glossary_frame">
    <table cellspacing="0" cellpadding="0" border="0" class="glossary-terms">
    <tbody>
    {% for i in glossary %}
    {% for key, value in i.items %}
        {% if key == "terms" %}
            {% for k in value %}
                <tr>
                {% if forloop.first %}
                    {% for t_key, t_value in k.items %}
                        {% if t_key == "term" %}
                            <td rowspan="{{ value|length }}" class="glossary-letter" id="form_glossary_{{ t_value|slice:":1" }}">
                            <div class="glossary-letter">
                                <a name="glossary-letter-{{ t_value|slice:":1" }}"></a>
                                {{ t_value|slice:":1" }}
                            </div>
                            </td>
                        {% endif %}
                    {% endfor %}
                {% endif %}
                {% for t_key, t_value in k.items %}
                    {% if t_key == "term" %}
                        <td class="glossary-term">
                        {{ t_value }}
                        </td>
                    {% endif %}
                    {% if t_key == "description" %}
                        <td class="glossary-description">
                        {{ t_value }}
                        </td>
                    {% endif %}
                {% endfor %}

            {% endfor %}
            </tr>
        {% endif %}
    {% endfor %}
    {% endfor %}
    </tbody>
    </table>

</div>

{% endblock %}
